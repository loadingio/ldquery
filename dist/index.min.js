!function(){var t,e,n,u,d,a,h=function(e,t,n){var r=new Error(e+" "+t);return r.data=t,r.json=n,r.id=e,r.code=e,r.name="lderror",r.message=t,r},s=function(e){return new t(e)};for(e in n=(t=function(e){return c(e,t.prototype)}).prototype={find:function(t,n){var r,e,o;if((r=this).querySelector||(r=(o=[document,r.toString(),t])[0],t=o[1],n=o[2]),t instanceof HTMLElement)return t;try{return 0===n?r.querySelector(t):(e=Array.from(r.querySelectorAll(t)),n?e[n]:e)}catch(e){throw o=e,console.warn("ld$.find exception: "+t+" / "+n+" under ",r),o}},index:function(){return Array.from(this.parentNode.childNodes).indexOf(this)},child:function(){return Array.from(this.childNodes)},parent:function(e,t){var n;for(null==t&&(t=null),n=this;n&&n!==t;)n=n.parentNode;if(n!==t)return null;if(!e)return this;for(n=this;n&&n!==t&&(!n.matches||n.matches&&!n.matches(e));)n=n.parentNode;return n!==t||t&&t.matches&&t.matches(e)?n:null},cls:function(e,t,n){var r,o,u,s,i,a,c,l=[],f=[],d=this;if("object"==typeof e){for(r in e)o=e[r],l.push(this.classList[o?"add":"remove"](r));return l}for(u=0,i=(s=[[t,!!e],[n,!e]]).length;u<i;++u)c=(a=s[u])[0],o=a[1],f.push((Array.isArray(c)?c:[c]).map(h));return f;function h(e){return d.classList.toggle(e,o)}},attr:function(e,t){var n,r=[];if("object"!=typeof e)return null==t?this.getAttribute(e):this.setAttribute(e,t);for(n in e)t=e[n],r.push(this.setAttribute(n,t));return r},on:function(e,t){return this.addEventListener(e,t)},remove:function(){if(this.parentNode)return this.parentNode.removeChild(this)},insertAfter:function(e,t){return this.insertBefore(e,t.nextSibling)}})!function(e,u){s[e]=function(e){for(var t,n=[],r=1,o=arguments.length;r<o;++r)n.push(arguments[r]);return t=n,u.apply(e,t)}}(e,n[e]);function c(e,t){var n,r={}.hasOwnProperty;for(n in t)r.call(t,n)&&(e[n]=t[n]);return e}u={svg:"http://www.w3.org/2000/svg"},d=function(e,t,n){var r,o,u,t=c({credentials:"same-origin"},t);return n.json&&(t.body=JSON.stringify(n.json),(t.headers||(t.headers={}))["Content-Type"]="application/json; charset=UTF-8"),(r=n.params)&&(e+="?"+function(){var e,t=[];for(o in e=r)u=e[o],t.push(o+"="+encodeURIComponent(u));return t}().join("&")),s.fetch.headers&&!n.noDefaultHeaders&&c(t.headers||(t.headers={}),s.fetch.headers),{c:t,u:e}},c(s,{json:function(t){try{return JSON.parse(t)}catch(e){return t}},fetch:function(u,s,i){return null==s&&(s={}),null==i&&(i={}),new Promise(function(e,r){var t=d(u,s,i),n=t.u,t=t.c,o=setTimeout(function(){return r(h(1006,"timeout")),o=null},i.timeout||4e4);return a(n,t).then(function(n){if(o)return clearTimeout(o),n&&n.ok?e(null!=i.type?n[i.type]():n):n.clone().text().then(function(e){var t;try{if((t=JSON.parse(e))&&"lderror"===t.name)return r(c(h(n.status,e),t))}catch(e){t=null}return r(h(n.status,e,t))})}).catch(function(e){return clearTimeout(o),r(e)})})},create:function(n){var r,o,t=n.ns?document.createElementNS(u[n.ns]||n.ns,n.name):document.createElement(n.name);return n.style&&c(t.style,n.style),n.attr&&function(){var e,t=[];for(r in e=n.attr)o=e[r],t.push([r,o]);return t}().map(function(e){return t.setAttribute(e[0],e[1])}),n.className&&t.classList.add.apply(t.classList,n.className),n.text&&t.appendChild(document.createTextNode(n.text)),n.html&&(t.innerHTML=n.html),t}}),s.xhr=function(c,l,f){return null==l&&(l={}),null==f&&(f={}),new Promise(function(n,r){var e,t,o,u=d(c,l,f),s=u.u,i=u.c,a=new XMLHttpRequest;for(t in a.onreadystatechange=function(){var e,t;if(a.readyState===XMLHttpRequest.DONE){if(200!==(e=a.status)&&201!==e&&202!==e)return r(h(a.status,a.responseText));try{t="json"===f.type?JSON.parse(a.responseText):a.responseText}catch(e){return r(h(a.status,a.responseText))}return n(t)}},a.onloadstart=function(){return f.progress({percent:0,val:0,len:0})},f.progress&&(e=function(e){var e=[e.loaded,e.total],t=e[0],e=e[1];return f.progress({percent:t/e,val:t,len:e})},a.upload?a.upload.onprogress=e:a.onprogress=e),a.open(i.method||"GET",s,!0),u=i.headers||{})o=u[t],a.setRequestHeader(t,o);return a.send(i.body)})},s.fetch.headers={},"undefined"!=typeof window&&null!==window&&(window.ld$=s,a=window.fetch),"undefined"!=typeof module&&null!==module&&(null==a&&(a=require("node-fetch")),module.exports=s)}.call(this);
